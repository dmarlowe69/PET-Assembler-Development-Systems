;********************************;.PAGE 'ASS4';.OPT LIST;*********************************=$0400        ;START OF BASIC PET;*********************************;;         ASSEBMLER64;      ASSEMBLER.C64 V080282; CBM RESIDENT ASSEMBLER V080282;; (C) 1982 BY COMMODORE MACHINES;;  DOCUMENTED BY DENTON MARLOWE;********************************;; BASIC FORMAT PROGRAM;; 10 SYS(2063);;*********************************;;********************************HH0400  BRK ;********************************;;********************************HH0401 .WORD BASIC       .BYTE $0A,$00       .BYTE $9E       .TEXT '(1039)'       .BYTE $00BASIC  .BYTE $00,$00;********************************;       .BYTE $0D;       .BYTE $04;       .BYTE $0A ;10;       .BYTE $00 ;0;       .BYTE $9E ;SYS;       .BYTE $28 ;(;       .BYTE $31 ;1;       .BYTE $30 ;0;XX0409 .BYTE $33 ;3;       .BYTE $39 ;9;       .BYTE $29 ;');       .BYTE $00;       .BYTE $00;       .BYTE $00;********************************;*=$040F        ;ASSEMBLER64 ORGIN;*********************************; MAIN BODY OF CODE;*********************************;********************************; ZEROPAGE;********************************;********************************; PET SPECIFIC ADDRESS;********************************BASICR = $B3FF ;RESTART BASICBASICW = $D7A4 ;EXIT TO BASIC;********************************; EXTERNAL ADDRESS EQUATES;********************************BB0310 = $0310 ;PRINT BUFFER;********************************; I/O ADDRESSES;********************************VIA = $E840;********************************; KERNAL ROM ADDRESS EQUATES;********************************CHEOUT = $E202INPUT  = $F205CLOSE2 = $F2E2OPEN2  = $F563CHKIN  = $F7AFCHKOUT = $F7FE;********************************; EXTERNAL ADDRESS EQUATES;********************************CLRCHN = $FFCCCHRIN  = $FFCFCHROUT = $FFD2;*********************************; MAIN BODY OF CODE;*********************************ZZ040F LDX #$FF       TXS        CLD        LDA #$00       STX $03B4       STA $02B2       STA $027A       STA $02A6       STA $02BF       STA $028E       STA $028F       STA $02B5;********************************; POINTER TO END OF CODE SPACE;********************************       LDY #>ZZ2177 ;#$21      ;'!'       LDX #<ZZ2177 ;#$71       STX $4E       STY $4F;********************************;;********************************       LDY $31       LDX $30       STX $54       STY $55       JSR XX061A       LDA #$01       STA $0290       LDA #$00       STA $0291       LDA #$05       STA $D2       LDA #$00       STA $D3       STA $D4       STA $D1       JSR OPEN2 ;$F563       LDA #$00       STA $D1       STA $D3       LDA #$01       STA $D2       LDA #$03       STA $D4       JSR OPEN2 ;$F563;********************************;;********************************XX046A LDA #$93     ;CLEAR SCREEN       JSR CHROUT   ;OUTPUT       LDA #>AA1CB5 ;#$1C       LDY #<AA1CB5 ;#$B5       JSR XX063A   ;OUTPUT STRING;********************************;;********************************       JSR CLRCHN       LDX #$05       STX $027A       JSR CHKIN ;$F7AF       LDX #$28      ;'('       STX $B3XX0485 DEC $B3       BEQ XX046A       JSR CHRIN       CMP #$20      ;' '       BEQ XX0485       CMP #$0D       BEQ XX04D4       LDX #$00       STX $03B4       STX $03B3       BEQ XX04A5XX049E JSR CHRIN       CMP #$20      ;' '       BEQ XX04B9XX04A5 CMP #$0D       BEQ XX04B9       LDX $03B3       CPX #$0E       BEQ XX046A       STA $03A1,X       INX        STX $03B3       BNE XX049EXX04B9 LDA #$2C      ;','       STA $03A1,X       INX        LDA #$53      ;'S'       STA $03A1,X       INX        LDA #$2C      ;','       STA $03A1,X       INX        LDA #$57      ;'W'       STA $03A1,X       INX        STX $03B3;********************************; PRINT HARD COPY ?;********************************XX04D4 LDA #>AA1D1C ;#$1D       LDY #<AA1D1C ;#$1C       JSR XX063A;********************************; PROCESS INPUT;********************************       JSR CHRIN       LDX #$00       STX $02B3       CMP #$4E      ;'N'       BEQ XX051E;********************************; PRINT IEEE PRINTER?;********************************       LDA #>AA1D34 ;#$1D       LDY #<AA1D34 ;#$34      ;'4'       JSR XX063A;********************************; PROCESS INPUT;********************************       JSR CHRIN       CMP #$4E      ;'N'       BNE XX050A       LDA #$C0       STA $02B3       LDX #$FF       STX VIA+$03 ;$E843       LDA #$EC       STA VIA+$0C ;$E84C       BIT VIA+$01 ;$E841       JMP XX051E;********************************XX050A LDA #$04       STA $D2       STA $D4       LDA #$00       STA $D3       STA $D1       JSR OPEN2 ;$F563       LDA #$80       STA $02B3;********************************; SOURCE FILE NAME;********************************XX051E LDA #>AA1C85 ;#$1C       LDY #<AA1C85 ;#$85       JSR XX063A;********************************; PROCESS INPUT;********************************       LDX #$28      ;'('       STX $B3XX0529 DEC $B3       BEQ XX04D4       JSR CHRIN       CMP #$20      ;' '       BEQ XX0529       CMP #$0D       BNE XX053B       JMP BASICR ;$B3FF;********************************XX053B PHA        JSR XX058D       PLA        LDX #$00       STX $D1       BEQ XX054DXX0546 JSR CHRIN       CMP #$20      ;' '       BEQ XX0562XX054D CMP #$0D       BEQ XX0562       LDX $D1       CPX #$0E       BEQ XX051E       STA $027B,X       INX        STX $D1       STX $028B       BNE XX0546XX0562 LDA #$2C      ;','       STA $027B,X       INX        LDA #$53      ;'S'       STA $027B,X       INX        STX $D1       STX $028B;********************************; PRINT CR;********************************       LDA #>AA1C49 ;#$1C       LDY #<AA1C49 ;#$49      ;'I'       JSR XX063A       JSR XX05BF;********************************; PRINT PASS1;********************************       LDA #>AA1C43 ;#$1C       LDY #<AA1C43 ;#$43      ;'C'       JSR XX063A       JSR XX0665       JSR XX168C       JMP XX0681;********************************XX058D LDA #$07       STA $D2       LDA #$02       STA $D1       LDA #$08       STA $D4       LDA #$0F       STA $D3       LDA #$49      ;'I'       STA $0348       LDA #$30      ;'0'       STA $0349       LDA #$03       STA $DB       LDA #$48      ;'H'       STA $DA       JSR OPEN2 ;$F563       LDA #$07       JSR CLOSE2 ;$F2E2       LDA #$31      ;'1'       STA $0349       JMP OPEN2 ;$F563;********************************XX05BF LDA #$08       STA $D4       LDA #$02       STA $D2       STA $D3       LDA #$02       STA $DB       LDA #$7B       STA $DA       LDA $028B       STA $D1       JSR OPEN2 ;$F563       JSR XX1FE6       LDA #$80       STA $02BF       RTS ;********************************XX05E2 JSR XX061A       JSR XX20AE;********************************; PRINT PASS2;********************************       LDA #>AA1C4A ;#$1C       LDY #<AA1C4A ;#$4A      ;'J'       JSR XX063A;       LDA $03B4       BNE XX0611       LDA $03B3       STA $D1       LDA #$03       STA $DB       LDA #$A1       STA $DA       LDA #$06       STA $D2       STA $D3       LDA #$08       STA $D4       JSR OPEN2 ;$F563       JSR XX1FE6XX0611 JSR XX0665       JSR XX05BF       JMP XX0681;********************************XX061A LDA #$00       STA $46       STA $47       STA $02A7       STA $02A8       STA $029A       STA $029C       STA $029D       LDA #>XX0DDC ;#$0D       STA $028C       LDA #<XX0DDC ;#$DC       STA $02B4       RTS ;********************************; OUTPUT STRING LAST CHAR BIT 8 SET;********************************XX063A PHA        LDA #$01       CMP $027A       BEQ XX0651       TYA        PHA        JSR CLRCHN       LDX #$01       STX $027A       JSR CHKOUT ;$F7FE       PLA        TAY XX0651 PLA        STA $49       STY $48       LDY #$00XX0658 LDA ($48),Y       INY        PHA        AND #$7F       JSR CHROUT       PLA        BPL XX0658       RTS ;********************************;;********************************XX0665 LDY #$13       LDA #$20      ;' 'XX0669 STA BB0310,Y       DEY        BPL XX0669       LDX $028B       DEX        DEX        STX $029AXX0677 LDA $027A,X       STA $030F,X       DEX        BNE XX0677       RTS ;********************************XX0681 JSR XX1FB4       LDA #$00       STA $02A2       STA $02B5       STA $02A9       STA $02AA       STA $02B1       STA $02B7       STA $02AB       STA $02AC       STA $02AD       STA $02A1       STA $02A3       STA $02A4       STA $02A5       STA $02AE       LDA $028C       BEQ XX06CA       LDX #$00       INC $02A8       BNE XX06BF       INC $02A7XX06BF JSR XX1EF3       CMP #$0D       BEQ XX06D4       CMP #$00       BNE XX06CDXX06CA JMP XX0B01;********************************XX06CD STA $02C0,X       INX        JMP XX06BF;********************************XX06D4 DEX        STX $02B7XX06D8 JSR XX0FA2       BCC XX06EE       LDX $02AE       LDA $02C0,X       CMP #$3E      ;'>'       BNE XX06EA       JMP XX0F9C;********************************XX06EA CMP #$3B      ;';'       BNE XX06F1XX06EE JMP XX0F95;********************************XX06F1 JSR XX0FC6       BCS XX06FF       LDA #$03       LDX $02A9       TAY        JMP XX0F99;********************************XX06FF LDX $02A9       LDA $02C0,X       CMP #$2E      ;'.'       BNE XX070C       JMP XX08A9;********************************XX070C CMP #$2A      ;'*'       BNE XX0713       JMP XX07E7;********************************XX0713 LDY $02AB       CPY #$06       BEQ XX0723       BCC XX0723       LDA #$09       LDY #$03       JMP XX0F99;********************************XX0723 STY $0297       JSR XX1060       BCS XX0732       LDA #$10       LDY #$03       JMP XX0F99;********************************XX0732 LDA $02AB       CMP #$03       BNE XX0741       JSR XX1447       BCC XX0741       JMP XX0C6B;********************************XX0741 LDA $02A3       BEQ XX074F       LDA #$03       TAY        LDX $02A9       JMP XX0F99;********************************XX074F LDA #$01       STA $02A3       LDX $02AE       JSR XX1046       BCS XX0763       LDA #$08       LDY #$03       JMP XX0F99;********************************XX0763 LDA $0349       CMP #$20      ;' '       BNE XX0788       LDA $0348       CMP #$41      ;'A'       BEQ XX0781       CMP #$58      ;'X'       BEQ XX0781       CMP #$59      ;'Y'       BEQ XX0781       CMP #$53      ;'S'       BEQ XX0781       CMP #$50      ;'P'       BNE XX0788XX0781 LDA #$20      ;' '       LDY #$03       JMP XX0F99;********************************XX0788 STX $02A1       LDX #$00XX078D LDA $0348,X       PHA        INX        CPX #$06       BNE XX078D       LDA $02AB       PHA        LDA $02AA       STA $02AE       INC $02AE       JSR XX0FA2       BCC XX07AF       LDA $02C0,X       CMP #$3D      ;'='       BEQ XX0801XX07AF JSR XX13C7       BCC XX07CC       LDA $0294       CMP $47       BNE XX07C2       LDA $0295       CMP $46       BEQ XX07D9XX07C2 LDA #$02       LDY #$03       LDX $02A1       JMP XX0F99;********************************XX07CC LDA $47       STA $0294       LDA $46       STA $0295       JSR XX1412XX07D9 LDA $02B7       CMP $02AE       BCS XX07E4       JMP XX0F95;********************************XX07E4 JMP XX06D8;********************************XX07E7 LDA #$FF       STA $02A4       INC $02AE       STX $02A1       JSR XX0FA2       BCS XX07FAXX07F7 JMP XX0F6D;********************************XX07FA LDA $02C0,X       CMP #$3D      ;'='       BNE XX07F7XX0801 INC $02AE       LDA $02AE       CMP $02B7       BEQ XX0811       BCC XX0811       JMP XX0F6D;********************************XX0811 JSR XX0FA2       BCS XX0820       LDX $02AA       LDA #$07       LDY #$00       JMP XX0F99;********************************XX0820 JSR XX108D       DEC $0298       BMI XX0838       BNE XX0831       LDA #$11       LDY #$03       JMP XX0F99;********************************XX0831 LDA #$13       LDY #$03       JMP XX0F99;********************************XX0838 LDA $02A4       BEQ XX086B       LDA #$01       AND $02B5       BEQ XX0857       LDX #$00       STX $46       STX $47       LDX $02A9       LDA #$21      ;'!'       LDY #$FF       JSR XX147C       JMP XX0F9C;********************************XX0857 LDX #$00       TXA        TAY        JSR XX147C       LDA $02AC       STA $47       LDA $02AD       STA $46       JMP XX0F9C;********************************XX086B PLA        STA $02AB       LDX #$05XX0871 PLA        STA $0348,X       DEX        BPL XX0871       JSR XX13C7       BCC XX0897       LDA $0294       CMP $02AC       BNE XX088D       LDA $0295       CMP $02AD       BEQ XX08A6XX088D LDX $02A1       LDA #$02       LDY #$00       JMP XX0F99;********************************XX0897 LDA $02AC       STA $0294       LDA $02AD       STA $0295       JSR XX1412XX08A6 JMP XX0F95;********************************XX08A9 LDA #$14       STA $02B1       LDX $02A9       INX ;********************************; POINTER TO ASSEMBLER DIRECTIVES;********************************       LDA #<AA19B4 ;#$B4       STA $48       LDA #>AA19B4 ;#$19       STA $49;********************************; LOOKUP ASSEMBLER DIRECTIVES;********************************       LDA #$03       STA $0297       JSR XX1060XX08C2 CPX $02B7       BEQ XX08C9       BCS XX08D4XX08C9 LDA $02C0,X       CMP #$20      ;' '       BEQ XX08D4       INX        JMP XX08C2;********************************XX08D4 STX $02AE       LDA #$00       STA $029B       BCS XX08E1       JMP XX0F72;********************************XX08E1 LDX #$17XX08E3 LDY #$02XX08E5 LDA $0348,Y       CMP ($48),Y       BNE XX0902       DEY        BPL XX08E5       TXA        ASL A       TAX        LDA XX1984,X       STA $48       LDA XX1985,X       STA $49       LDA $02B4       JMP ($0048);********************************XX0902 LDA $48       CLC        ADC #$03       STA $48       BCC XX090D       INC $49XX090D DEX        BPL XX08E3       JMP XX0F72;********************************AA0913 LDA #$01;********************************       .BYTE $2C ;BIT ZP SKIP;********************************AA0916 LDA #$03;********************************      .BYTE $2C ;BIT ZP SKIP;********************************AA0919 LDA #$02       STA $02A5       LDY #$00       STY $029B       TAY        CPY #$03       BNE XX0929       DEY XX0929 STY $02BA       JSR XX0FA2       BCS XX0939       LDX $02AA       LDA #$07       JMP XX0F99;********************************XX0939 STY $02BAXX093C LDX $02A9       JSR XX108D       DEC $0298       BMI XX097C       BEQ XX094C       JMP XX09F7;********************************XX094C LDA #$01       STA $02B1XX0951 CMP #$01       BNE XX095E       LDY $02A5       STY $02BA       JMP XX0961;********************************XX095E LDY $02BAXX0961 LDA $02B1       LDX $02A9       JSR XX147C       LDY #$00       STY $029B       LDY $02BA       CPY #$03       BNE XX09CF       DEC $02BA       JMP XX09CF;********************************XX097C LDA #$04       STA $02B1       LDX $02A5       CPX #$03       BNE XX0994       LDA $02AC       LDY $029B       JSR XX204C       INC $029BXX0994 LDA $02AD       LDY $029B       JSR XX204C       INC $029B       LDX $02A5       CPX #$02       BNE XX09B3       LDA $02AC       LDY $029B       JSR XX204C       INC $029BXX09B3 LDA $02B5       AND #$09       BNE XX0951       CPX #$01       BNE XX09C3       LDA $02AC       BNE XX0951XX09C3 LDA #$00       TAX        LDY $02BA       STA $029B       JSR XX147CXX09CF JSR XX1006       BCS XX09D7       JMP XX0F9C;********************************XX09D7 LDA $02C0,X       INX        STX $02AE       CPX $02B7       BEQ XX09E8       BCC XX09E8       JMP XX0F6D;********************************XX09E8 CMP #$2C      ;','       BNE XX09CF       JSR XX0FA2       BCS XX09F4       JMP XX0F6D;********************************XX09F4 JMP XX093C;********************************XX09F7 LDA $02C0,X       CMP #$27      ;'''       BEQ XX0A0EXX09FE LDA #$13       LDY $02BB       JSR XX147C       LDY #$00       STY $029B       JMP XX09CF;********************************XX0A0E CPX $02A9       BNE XX09FE       LDY $02A5       CPY #$02       BCS XX09FE       STX $02AE       LDY #$00XX0A1F INC $02AE       LDX $02AE       CPX $02B7       BEQ XX0A2C       BCS XX0A71XX0A2C LDA $02C0,X       CMP #$27      ;'''       BNE XX0A47       INC $02AE       LDX $02AE       CPX $02B7       BEQ XX0A40       BCS XX0A62XX0A40 LDA $02C0,X       CMP #$27      ;'''       BNE XX0A62XX0A47 PHA        AND #$7F       CMP #$20      ;' '       BCC XX0A52       CMP #$60       BCC XX0A56XX0A52 PLA        LDA #$00       PHA XX0A56 PLA        LDY $029B       JSR XX204C       INC $029B       BNE XX0A1FXX0A62 LDY $029B       LDA #$00       STA $029B       TAX        JSR XX147C       JMP XX09CF;********************************XX0A71 LDY $029B       LDA #$07       JMP XX0F99;********************************XX0A79 JSR XX0FA2       BCS XX0A81       JMP XX0F95;********************************XX0A81 LDX $02A9       LDA #$03       STA $0297       JSR XX1060       BCS XX0A91       JMP XX0F72;********************************; POINTER TO CODE GEN DIRECTIVES;********************************XX0A91 LDA #<ZZ19D5 ;#$D5       STA $48       LDA #>ZZ19D5 ;#$19       STA $49       LDX #$0C;********************************;.FIL ASS4.DSM1;********************************;.END;*=$0A9B;********************************       JMP XX08E3;********************************; FUNCTIONS FROM VECTOR TABLE;********************************AA0A9E AND #$7F;********************************       .BYTE $2CAA0AA1 ORA #$80;********************************       .BYTE $2CAA0AA4 ORA #$40;********************************       .BYTE $2CAA0AA7 AND #$BF;********************************       .BYTE $2CAA0AAA AND #$DF;********************************        .BYTE $2CAA0AAD  ORA #$20;********************************       .BYTE $2CAA0AB0 ORA #$10;********************************       .BYTE $2CAA0AB3 AND #$EF;********************************       .BYTE $2CAA0AB6 ORA #$08;********************************       .BYTE $2CAA0AB9 AND #$F7;********************************       .BYTE $2CAA0ABC ORA #$04;********************************       .BYTE $2CAA0ABF AND #$FB;********************************; ASSEMBLY CODE;********************************       STA $02B4       JSR XX1006       BCS XX0ACC       JMP XX0F9C;********************************XX0ACC LDA $02C0,X       CMP #$2C      ;','       BEQ XX0AD6       JMP XX0F9C;********************************XX0AD6 INX        STX $02AE       JMP XX0A79;********************************AA0ADD JSR XX0FA2       BCS XX0AE5       LDX $029BXX0AE5 LDA #$CC       LDY #$00       JMP XX0F99;********************************AA0AEC JSR XX0FA2       BCC XX0AF8       LDA $02C0,X       CMP #$27      ;'''       BEQ XX0AFAXX0AF8 LDX #$00XX0AFA LDA #$CB       LDY #$00       JMP XX0F99;********************************XX0B01 BIT $02BF       BVS XX0B28       LDX #$FF       TXS        LDX $02A6       BEQ XX0B1D       LDA #$02       JSR CLOSE2 ;$F2E2       LDX #$00       TXA        TAY        JSR XX147C       JMP XX16D9;********************************XX0B1D INC $02A6       LDA #$02       JSR CLOSE2 ;$F2E2       JMP XX05E2;********************************XX0B28 LDA #$03       JSR CLOSE2 ;$F2E2       LDA $02BF       AND #$BF       STA $02BFXX0B35 LDX #$00       STX $027A       LDY #$00       LDA #$CD       INC $02B2       JSR XX147C       DEC $02B2       LDA #$0D       STA $028C       JMP XX0F9C;********************************AA0B4F BIT $02BF       BVC XX0B5C       LDA #$03       JSR CLOSE2 ;$F2E2       JMP XX0BD1;********************************XX0B5C LDA #$02       JSR CLOSE2 ;$F2E2       JSR XX0B77       LDA #$02       STA $D2       STA $D3       LDA #$08       STA $D4       JSR OPEN2 ;$F563       JSR XX1FE6       JMP XX0B35;********************************XX0B77 JSR XX0FA2       BCC XX0B9F       LDY #$00XX0B7E LDA $02C0,X       CMP #$20      ;' '       BEQ XX0B95       STA $0348,Y       CPX $02B7       BEQ XX0B95       INY        INX        CPY #$0E       BNE XX0B7E       BEQ XX0B9FXX0B95 LDA #$0D       INY        STY $D1       STA $028C       BNE XX0BA9;********************************; PRINT FILE NAME ERROR;********************************XX0B9F LDA #>AA1C98 ;#$1C       LDY #<AA1C98 ;#$98       JSR XX063A       JMP XX1F8D;********************************XX0BA9 LDX $D1       LDA #$2C      ;','       STA $0348,X       INX        LDA #$53      ;'S'       STA $0348,X       INX        STX $D1       LDA #$03       STA $DB       LDA #$48      ;'H'       STA $DA       RTS ;********************************AA0BC2 BIT $02BF       BVC XX0BD1;********************************; PRINT .LIB ERROR;********************************       LDA #>AA1CA9 ;#$1C       LDY #<AA1CA9 ;#$A9       JSR XX063A       JMP XX1F8D;********************************XX0BD1 JSR XX0B77       LDA #$03       STA $D2       STA $D3       LDA #$08       STA $D4       JSR OPEN2 ;$F563       JSR XX1FE6       LDA #$40      ;'@'       ORA $02BF       STA $02BF       JMP XX0B35;********************************AA0BEF LDA #$FF;********************************       .BYTE $2C ;BIT ZP SKIP;********************************AA0BF2 LDA #$00       STA $03B5       JSR XX0FA2       BCC XX0C53       STY $02BA       LDX $02A9       JSR XX108D       DEC $0298       BMI XX0C0F       BEQ XX0C48       JMP XX0C56;********************************XX0C0F STX $02AE       JSR XX0FA2       BCC XX0C53       CMP #$3C      ;'<'       BEQ XX0C1E       JMP XX0C53;********************************XX0C1E LDY #$FF       LDA $02AC       ORA $02AD       BEQ XX0C2A       LDY #$00XX0C2A TYA        EOR $03B5       BNE XX0C45XX0C30 JSR XX0C60       CMP #$0D       BNE XX0C30       JSR XX0C60       CMP #$3E      ;'>'       BNE XX0C30XX0C3E JSR XX0C60       CMP #$0D       BNE XX0C3EXX0C45 JMP XX0F9C;********************************XX0C48 LDA $02A6       BNE XX0C50       LDA #$0B;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX0C50 LDA #$01;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX0C53 LDA #$07;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX0C56 LDA #$0D       LDX $02AA       LDY #$00       JMP XX0F99;********************************XX0C60 JSR XX1EF3       CMP #$00       BEQ XX0C68       RTS ;********************************XX0C68 JMP XX0B01;********************************XX0C6B LDY #$00       STY $029D       STY $02B0       STY $029E       LDA $0293       CMP #$14       BNE XX0C8DXX0C7D LDY #$00       LDA $0292       JSR XX204C       LDX #$00       LDY #$01       TXA        JMP XX0F99;********************************XX0C8D CMP #$15       BNE XX0C9B       LDA #$0E       STA $0293       LDA #$07       STA $02B1XX0C9B LDA $02AA       STA $02AE       INC $02AE       JSR XX0FA2       BCS XX0CB1       LDA #$18       STA $02B1       JMP XX0F6D;********************************XX0CB1 LDA $02C0,X       CMP #$3B      ;';'       BNE XX0CBB       JMP XX0F72;********************************XX0CBB CMP #$41      ;'A'       BNE XX0CE7       CPX $02B7       BEQ XX0CCB       LDY $02C1,X       CPY #$20      ;' '       BNE XX0CE7XX0CCB LDY $0293       LDA XX1AB2,Y       BMI XX0CDD       CLC        ADC $0292       STA $0292       JMP XX0C7D;********************************XX0CDD LDX $02A9       LDY #$03       LDA #$05       JMP XX0F99;********************************XX0CE7 CMP #$23      ;'#'       BNE XX0CF0       LDA #$0A       JMP XX0CF6;********************************XX0CF0 CMP #$28      ;'('       BNE XX0D07       LDA #$05XX0CF6 STA $029D       INX        INC $02A9       CPX $02B7       BEQ XX0D07       BCC XX0D07       JMP XX0F6D;********************************XX0D07 JSR XX108D       STX $02A0       LDA #$13       STA $02B1       DEC $0298       BMI XX0D6F       BEQ XX0D67       LDA $029D       CMP #$0A       BEQ XX0D23       JMP XX0F7E;********************************XX0D23 LDA $02C0,X       CMP #$27      ;'''       BEQ XX0D2D       JMP XX0F78;********************************XX0D2D TXA        TAY        INX        CPX $02B7       BEQ XX0D3A       BCC XX0D3A       JMP XX0F6D;********************************XX0D3A LDA $02C0,X       CMP #$20      ;' '       BCC XX0D45       CMP #$60       BCC XX0D47XX0D45 LDA #$00XX0D47 STA $02AD       INX        CPX $02B7       BEQ XX0D52       BCS XX0D6FXX0D52 LDA $02C0,X       CMP #$20      ;' '       BEQ XX0D6F       CMP #$27      ;'''       BEQ XX0D6F       TYA        TAX        LDY #$03       LDA $02B1       JMP XX0F99;********************************XX0D67 INC $029E       LDA #$02       STA $02B0XX0D6F JSR XX1006       BCC XX0DCC       LDA $02C0,X       CMP #$29      ;')'       BNE XX0D93       INC $029D       INC $029D       LDA $0292       CMP #$4C      ;'L'       BEQ XX0DD3       INX        CPX $02B7       BEQ XX0D93       BCC XX0D93       JMP XX0F6D;********************************XX0D93 LDA $02C0,X       CMP #$2C      ;','       BNE XX0DAC       LDA $0292       CMP #$4C      ;'L'       BEQ XX0DDC       INX        CPX $02B7       BEQ XX0DAC       BCC XX0DAC       JMP XX0F6D;********************************XX0DAC LDA $02C0,X       CMP #$58      ;'X'       BNE XX0DB9       INC $029D       JMP XX0E05;********************************XX0DB9 CMP #$59      ;'Y'       BEQ XX0DC4       LDY #$03       LDA #$12       JMP XX0F99;********************************XX0DC4 INC $029D       INC $029D       BNE XX0E05XX0DCC LDA $0292       CMP #$4C      ;'L'       BNE XX0E05XX0DD3 LDA $029D       BEQ XX0DF3       CMP #$07       BEQ XX0DE4XX0DDC LDA #$18       STA $02B1       JMP XX0F78;********************************XX0DE4 INX        CPX $02B7       BMI XX0DEC       BCS XX0DF3XX0DEC LDA $02C0,X       CMP #$20      ;' '       BNE XX0DDCXX0DF3 LDA $029D       BNE XX0DFB       JMP XX0DFD;********************************XX0DFB LDA #$20      ;' 'XX0DFD LDY #$02       STY $02B0       JMP XX0F03;********************************XX0E05 LDA $029E       BEQ XX0E0D       JMP XX0EA2;********************************XX0E0D LDA $0293       CMP #$0E       BNE XX0E5B       CLC        LDA $46       ADC #$02       STA $02BC       LDA $47       ADC #$00       STA $02BB       LDA $02AD       SEC        SBC $02BC       STA $02AD       TAY        LDA $02AC       SBC $02BB       STA $02AC       BPL XX0E3E       TYA        BMI XX0E46       BPL XX0E41XX0E3E TYA        BPL XX0E46XX0E41 LDA #$17       STA $02B1XX0E46 LDA $02AC       BEQ XX0E7E       CMP #$FF       BEQ XX0E54       LDA #$17       STA $02B1XX0E54 LDA #$00       STA $02AC       BEQ XX0E7EXX0E5B LDA $029D       CMP #$06       BCC XX0E7E       CMP #$09       BEQ XX0E68       BCS XX0E7EXX0E68 LDA $02AC       BNE XX0E74       LDA $02AD       CMP #$FF       BNE XX0E7EXX0E74 LDA #$19       STA $02B1       LDA #$00       STA $02ACXX0E7E LDA #$02       STA $02B0       LDA $02AC       BNE XX0EA2       LDA #$01       STA $02B0       LDA $029D       CLC        ADC #$02       STA $029DXX0E96 CMP #$0D       BCC XX0EB1       LDA #$15       STA $02B1       JMP XX0F72;********************************XX0EA2 LDA $029D       CLC        ADC #$0D       STA $029DXX0EAB CMP #$0F       BEQ XX0EB1       BCS XX0EC0XX0EB1 TAY        DEY        LDA XX1AA4,Y       CLC        ADC $0293       TAY        LDA XX1AB3,Y       BPL XX0F03XX0EC0 LDA $029E       BEQ XX0EE5       LDA $02B0       CMP #$02       BEQ XX0ED4       LDA #$18       STA $02B1       JMP XX0F72;********************************XX0ED4 LDA #$01       STA $02B0       LDA $029D       SEC        SBC #$0B       STA $029D       JMP XX0E96;********************************XX0EE5 LDA $02B0       CMP #$01       BEQ XX0EF4       LDA #$18       STA $02B1       JMP XX0F72;********************************XX0EF4 INC $02B0       LDA $029D       CLC        ADC #$0B       STA $029D       JMP XX0EAB;********************************XX0F03 CLC        ADC $0292       LDY #$00       JSR XX204C       LDA $029E       BNE XX0F50       LDY #$01       LDA $02AD       JSR XX204C       LDY #$02       LDA $02B0       CMP #$01       BEQ XX0F28       LDA $02AC       JSR XX204CXX0F28 LDA $02B1       CMP #$17       BEQ XX0F65       CMP #$19       BEQ XX0F78       LDA #$09       AND $02B5       BNE XX0F89       LDA $02B0       CMP #$01       BNE XX0F46       LDA $02AC       BNE XX0F89XX0F46 LDX #$00       LDY $02B0       INY        TXA        JMP XX0F99;********************************XX0F50 LDY $02B0       LDA $0293       CMP #$0E       BNE XX0F5C       LDY #$01XX0F5C LDX $02A9       INY        LDA #$01       JMP XX0F99;********************************XX0F65 LDX $02A9       LDY #$02       JMP XX0F99;********************************XX0F6D LDA #$07       STA $02B1XX0F72 LDX $02A9       JMP XX0F81;********************************XX0F78 LDX $02AE       JMP XX0F81;********************************XX0F7E LDX $02A0XX0F81 LDY #$03       LDA $02B1       JMP XX0F99;********************************XX0F89 LDX $02A9       LDY $02B0       INY        LDA #$04       JMP XX0F99;********************************XX0F95 LDX #$00       TXA        TAY XX0F99 JSR XX147CXX0F9C LDX #$FF       TXS        JMP XX0681;********************************XX0FA2 LDA $02B7       CMP #$FF       BEQ XX0FF2       LDX $02AEXX0FAC CPX $02B7       BEQ XX0FB3       BCS XX0FF2XX0FB3 LDA $02C0,X       CMP #$20      ;' '       BEQ XX0FBF       STX $02A9       BNE XX0FECXX0FBF INX        STX $02AE       JMP XX0FAC;********************************XX0FC6 LDY #$00       STY $02AB       LDX $02AEXX0FCE CPX $02B7       BEQ XX0FD5       BCS XX0FEEXX0FD5 LDA $02C0,X       CMP #$20      ;' '       BEQ XX0FE4       CMP #$3D      ;'='       BEQ XX0FE4       CMP #$3B      ;';'       BNE XX0FF4XX0FE4 CPY #$00       BNE XX0FFFXX0FE8 DEX        STX $02AAXX0FEC SEC        RTS ;********************************XX0FEE CPY #$00       BEQ XX0FE8XX0FF2 CLC        RTS ;********************************XX0FF4 CMP #$27      ;'''       BNE XX0FFF       INY        CPY #$02       BNE XX0FFF       LDY #$00XX0FFF INX        INC $02AB       JMP XX0FCE;********************************XX1006 LDX $02AEXX1009 CPX $02B7       BEQ XX1010       BCS XX0FF2XX1010 LDA $02C0,X       CMP #$27      ;'''       BNE XX1030XX1017 INX        STX $02AE       CPX $02B7       BEQ XX1022       BCS XX0FF2XX1022 LDA $02C0,X       CMP #$27      ;'''       BNE XX1017       INX        STX $02AE       JMP XX1009;********************************XX1030 LDA $02C0,X       CMP #$20      ;' '       BEQ XX0FF2       CMP #$29      ;')'       BEQ XX0FEC       CMP #$2C      ;','       BEQ XX0FEC       INX        STX $02AE       JMP XX1009;********************************XX1046 LDA $02C0,X       CMP #$41      ;'A'       BCC XX0FF2       CMP #$5B      ;'['       BCC XX0FEC       BCS XX0FF2XX1053 LDA $02C0,X       CMP #$30      ;'0'       BCC XX0FF2       CMP #$3A      ;':'       BCC XX0FEC       BCS XX0FF2XX1060 LDY #$FFXX1062 INY        CPY #$05       BEQ XX1069       BCS XX107BXX1069 CPY $0297       BCC XX1070       BCS XX1086XX1070 JSR XX1046       BCS XX107D       JSR XX1053       BCS XX107D       RTS ;********************************XX107B SEC        RTS ;********************************XX107D LDA $02C0,X       STA $0348,Y       INX        BNE XX1062XX1086 LDA #$20      ;' '       STA $0348,Y       BNE XX1062XX108D LDA #$00       STA $02AC       STA $02AD       LDA #$FC       AND $02B5       STA $02B5       CPX $02B7       BEQ XX10A7       BCC XX10A7XX10A4 JMP XX12ED;********************************XX10A7 JSR XX12F3       BCS XX10A4       LDY #$2B      ;'+'       CMP #$2D      ;'-'       BNE XX10B5       LDY #$2D      ;'-'       INX XX10B5 STY $0296       CPX $02B7       BEQ XX10BF       BCS XX10A4XX10BF LDA #$00       STA $02B8       STA $02B9       JSR XX12F3       BCS XX10A4       CMP #$3C      ;'<'       BNE XX10D6       INC $02B8       JMP XX10DD;********************************XX10D6 CMP #$3E      ;'>'       BNE XX10E5       INC $02B9XX10DD INX        CPX $02B7       BEQ XX10E5       BCS XX10A4XX10E5 JSR XX1053       BCC XX10EF       LDY #$0A       JMP XX1171;********************************XX10EF CMP #$24      ;'$'       BNE XX10F8       LDY #$10       JMP XX115F;********************************XX10F8 CMP #$40      ;'@'       BNE XX1101       LDY #$08       JMP XX115F;********************************XX1101 CMP #$25      ;'%'       BNE XX1109       LDY #$02       BNE XX115FXX1109 JSR XX1046       BCC XX114D       TXA        TAY XX1110 INX        CPX $02B7       BEQ XX1118       BCS XX1122XX1118 JSR XX1053       BCS XX1110       JSR XX1046       BCS XX1110XX1122 STY $02BB       TXA        SEC        SBC $02BB       CMP #$07;********************************;.FIL ASS4.DSM2;********************************;.END;*=$112C;********************************       BCC XX1131XX112E JMP XX12ED;********************************XX1131 STA $0297       LDX $02BB       JSR XX1060       BCC XX112E       STX $02BC       JSR XX13C7       LDX $02BC       BCS XX119D       LDX $02BB       JMP XX12EA;********************************XX114D CMP #$2A      ;'*'       BNE XX112E       LDA $46       STA $0295       LDA $47       STA $0294       INX        JMP XX119D;********************************XX115F INX        CPX $02B7       BEQ XX1167       BCS XX112EXX1167 JSR XX1053       BCS XX1171       JSR XX1046       BCC XX112EXX1171 STY $0299       TXA        TAY XX1176 INX        CPX $02B7       BEQ XX117E       BPL XX1188XX117E JSR XX1053       BCS XX1176       JSR XX1046       BCS XX1176XX1188 STY $02BB       TXA        SEC        SBC $02BB       STA $0297       TYA        TAX        JSR XX1308       BCS XX119D       JMP XX12ED;********************************XX119D LDA $02B8       BEQ XX11A9       LDA #$00       STA $0294       BEQ XX11B9XX11A9 LDA $02B9       BEQ XX11B9       LDA $0294       STA $0295       LDA #$00       STA $0294XX11B9 LDA $0296       CMP #$2B      ;'+'       BNE XX1210       LDA $02AD       CLC        ADC $0295       STA $02AD       LDA $02AC       ADC $0294       STA $02AC       LDA #$00       ROL A       TAY        LDA #$01       AND $02B5       ASL A       STA $02BB       LDA #$02       AND $02B5       EOR $02BB       BNE XX11F7       TYA        BEQ XX1202       LDA #$08       ORA $02B5       STA $02B5       BNE XX1202XX11F7 TYA        BEQ XX1205       LDA #$FE       AND $02B5       STA $02B5XX1202 JMP XX126C;********************************XX1205 LDA #$01       ORA $02B5       STA $02B5       JMP XX126C;********************************XX1210 CMP #$2D      ;'-'       BNE XX127F       LDA $02AD       SEC        SBC $0295       STA $02AD       LDA $02AC       SBC $0294       STA $02AC       LDA #$00       ROL A       TAY        LDA #$01       AND $02B5       ASL A       STA $02BB       LDA #$02       AND $02B5       EOR $02BB       BNE XX1257       TYA        BEQ XX124C       LDA #$FE       AND $02B5       STA $02B5       JMP XX126C;********************************XX124C LDA #$01       ORA $02B5       STA $02B5       JMP XX126C;********************************XX1257 STY $02BB       LDA #$01       AND $02B5       EOR $02BB       BEQ XX126C       LDA #$08       ORA $02B5       STA $02B5XX126C CPX $02B7       BEQ XX1273       BPL XX12E7XX1273 JSR XX12F3       BCS XX12E7       LDY $02C0,X       INX        JMP XX10B5;********************************XX127F LDA #$00       STA $02BB       STA $02BC       CMP #$2A      ;'*'       BNE XX12C3XX128B ASL $02BC       ROL $02BB       LSR $0294       ROR $0295       BCC XX12AC       CLC        LDA $02BC       ADC $02AD       STA $02BC       LDA $02BB       ADC $02AC       STA $02BBXX12AC LDA $0294       ORA $0295       BNE XX128BXX12B4 LDA $02BB       STA $02AC       LDA $02BC       STA $02AD       JMP XX126C;********************************XX12C3 CMP #$2F      ;'/'       BNE XX12EDXX12C7 LDA $02AD       SEC        SBC $0295       STA $02AD       LDA $02AC       SBC $0294       STA $02AC       BCC XX12B4       INC $02BC       BNE XX12C7       INC $02BB       JMP XX12C7;********************************XX12E7 LDA #$00;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX12EA LDA #$01;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX12ED LDA #$02       STA $0298       RTS ;********************************XX12F3 LDA $02C0,X       CMP #$20      ;' '       BEQ XX1307       CMP #$2C      ;','       BEQ XX1307       CMP #$29      ;')'       BEQ XX1307       CMP #$3B      ;';'       BEQ XX1307       CLC XX1307 RTS ;********************************XX1308 LDA #$00       STA $0294       STA $0295XX1310 LDA $02C0,X       JSR XX1053       BCC XX131D       SBC #$30      ;'0'       JMP XX1324;********************************XX131D JSR XX1046       BCC XX1329       SBC #$37      ;'7'XX1324 CMP $0299       BCC XX132BXX1329 CLC        RTS ;********************************XX132B STA $02B6       TXA        PHA        LDY $0299       CPY #$02       BNE XX133B       LDX #$01       BNE XX135DXX133B CPY #$08       BNE XX1343       LDX #$03       BNE XX135DXX1343 CPY #$10       BNE XX134B       LDX #$04       BNE XX135DXX134B CPY #$0A       BNE XX1329       LDA $0294       STA $02BB       LDA $0295       STA $02BC       LDX #$03XX135D ASL $0295       ROL $0294       BCC XX136D       LDA $02B5       ORA #$08       STA $02B5XX136D DEX        BNE XX135D       CPY #$0A       BNE XX13A1       ASL $02BC       ROL $02BB       BCC XX1384       LDA $02B5       ORA #$08       STA $02B5XX1384 LDA $0295       CLC        ADC $02BC       STA $0295       LDA $0294       ADC $02BB       STA $0294       BCC XX13A1       LDA $02B5       ORA #$08       STA $02B5XX13A1 LDA $02B6       CLC        ADC $0295       STA $0295       BCC XX13BA       INC $0294       BNE XX13BA       LDA $02B5       ORA #$08       STA $02B5XX13BA PLA        TAX        INX        DEC $0297       BEQ XX13C5       JMP XX1310;********************************XX13C5 SEC        RTS ;********************************XX13C7 LDA $4E       STA $42       LDA $4F       STA $43       LDA #$00       STA $45       STA $44XX13D5 SEC        LDA $45       SBC $028F       LDA $44       SBC $028E       BCS XX13FC       LDY #$05XX13E4 LDA $0348,Y       CMP ($42),Y       BNE XX13FE       DEY        BPL XX13E4       LDY #$06       LDA ($42),Y       STA $0294       INY        LDA ($42),Y       STA $0295       RTS ;********************************XX13FC CLC        RTS ;********************************XX13FE LDA $42       CLC        ADC #$08       STA $42       BCC XX1409       INC $43XX1409 INC $45       BNE XX13D5       INC $44       JMP XX13D5;********************************XX1412 SEC        LDA $42       SBC $54       LDA $43       SBC $55       BCS XX143D       LDY #$05XX141F LDA $0348,Y       STA ($42),Y       DEY        BPL XX141F       LDY #$06       LDA $0294       STA ($42),Y       INY        LDA $0295       STA ($42),Y       INC $028F       BNE XX143C       INC $028EXX143C RTS ;********************************; PRINT SYMBOL TABLE OVERFLOW;********************************XX143D LDA #>AA1C23 ;#$1C       LDY #<AA1C23 ;#$23      ;'#'       JSR XX063A       JMP XX1F8D;********************************; OPCODE TABLE POINTER;********************************XX1447 LDA #<ZZ19FC ;#$FC       STA $4A       LDA #>ZZ19FC ;#$19       STA $4B;********************************; LOOKUP OPCODE;********************************       LDX #$00XX1451 LDY #$02XX1453 LDA $0348,Y       CMP ($4A),Y       BNE XX146A       DEY        BPL XX1453       LDA XX1B85,X       STA $0293       LDA XX1BBD,X       STA $0292       RTS ;********************************XX146A LDA $4A       CLC        ADC #$03       STA $4A       BCC XX1475       INC $4BXX1475 INX        CPX #$39      ;'9'       BMI XX1451       CLC        RTS ;********************************XX147C PHA        TYA        PHA        STA $0342       TXA        STA $0343       PLA        TAX        LDA $46       STA $0344       LDA $47       STA $0345       PLA        STA $0346       LDA $02A8       STA $0347       CPX #$FF       BNE XX14A1       INX XX14A1 CPX #$04       BNE XX14AE       LDA $0346       CMP #$C9       BNE XX14AE       LDX #$02XX14AE CPX #$03       BNE XX14BB       LDA $0346       CMP #$CA       BNE XX14BB       LDX #$02XX14BB TXA        CLC        ADC $46       STA $46       BCC XX14C5       INC $47XX14C5 LDA $02A6       BNE XX14D6       LDA $0346       CMP #$02       BEQ XX14D6       CMP #$11       BEQ XX14D6       RTS ;********************************XX14D6 LDA $0346       BNE XX14DE       JMP XX172C;********************************XX14DE CMP #$CB       BNE XX14E8       LDA $0343       JMP XX1647;********************************XX14E8 CMP #$CC       BNE XX150B       LDA $0343       BNE XX14F5       ADC #$00       BNE XX1501XX14F5 TAX        JSR XX108D       LDA $0298       BNE XX1505       LDA $02ADXX1501 CLC        JMP XX1647;********************************XX1505 CMP #$01       BEQ XX150B       LDA #$13XX150B CMP #$CD       BEQ XX152C       STA $029F       LDA $02A6       BEQ XX1529       LDA $0346       CMP #$02       BNE XX1529       LDA #$00       STA $0346       STA $02B1       JMP XX172C;********************************XX1529 JMP XX18B0;********************************XX152C LDA #$00       STA $02B1       JMP XX1751;********************************XX1534 LDA $028E       STA $55       LDA $028F       ASL A       ROL $55       ASL A       ROL $55       ASL A       ROL $55       CLC        ADC $4E       STA $54       LDA $55       ADC $4F       STA $55       LDA $02AF       CMP #$34      ;'4'       BCS XX155D       JSR XX161C       JMP XX1560;********************************XX155D JSR XX1614XX1560 LDA #$00       STA $0297XX1565 LDA $02AF       CMP #$3A      ;':'       BMI XX156F       JSR XX1614XX156F JSR XX18A8       LDA #$00       STA $02BD       LDA $4E       STA $48       LDA $4F       STA $49XX157F LDY #$00       LDA $02BD       BNE XX1598       LDA ($48),Y       BEQ XX15A7       STA $02BDXX158D LDA $48       STA $42       LDA $49       STA $43       JMP XX15A7;********************************XX1598 LDA ($48),Y       BEQ XX15A7       CMP ($42),Y       BCC XX158D       BEQ XX15A4       BCS XX15A7XX15A4 INY        BNE XX1598XX15A7 CLC        LDA $48       ADC #$08       STA $48       BCC XX15B2       INC $49XX15B2 SEC        LDA $48       SBC $54       LDA $49       SBC $55       BCC XX157F       LDY #$00XX15BF LDA ($42),Y       JSR XX1F42       TYA        STA ($42),Y       INY        CPY #$06       BNE XX15BF       JSR XX18A2       LDA ($42),Y       JSR XX196C       INY        LDA ($42),Y       JSR XX196C       INC $0297       LDA $0297       CMP #$04       BEQ XX15EA       JSR XX18A2       JMP XX15F8;********************************XX15EA LDA #$00       STA $0297       JSR XX1F3B       JSR XX1FB4       INC $02AFXX15F8 SEC        LDA $028F       SBC #$01       STA $028F       LDA $028E       SBC #$00       STA $028E       ORA $028F       BEQ XX1613       BCC XX1613       JMP XX1565;********************************XX1613 RTS ;********************************XX1614 JSR XX162B       LDA #$FD       STA $02AFXX161C LDX #$6E       JSR XX2039       LDA $02AF       CLC        ADC #$06       STA $02AF       RTS ;********************************XX162B LDY $02AFXX162E CPY #$3A      ;':'       BCS XX1638       JSR XX1F3B       INY        BNE XX162EXX1638 JSR XX1641       JSR XX1F3B       JSR XX1F3BXX1641 JSR XX1F3B       JMP XX1F3B;********************************XX1647 PHP        PHA        LDA #$04       AND $02B4       BNE XX1653       PLA        PLP        RTS ;********************************XX1653 PLA        PLP        BCC XX16C5       TAX        BEQ XX1676       LDY #$00XX165C LDA $02C1,X       CPY #$14       BEQ XX1673       CMP #$27      ;'''       BEQ XX1673       STA BB0310,Y       INY        INX        CPX $02B7       BMI XX165C       BEQ XX165CXX1673 STY $029AXX1676 SED        CLC        LDA $0290       ADC #$01       STA $0290       LDA #$00       ADC $0291       STA $0291       CLD        JSR XX162BXX168C LDY #$00       CPY $029A       BEQ XX169FXX1693 LDA BB0310,Y       JSR XX1F42       INY        CPY $029A       BMI XX1693XX169F LDX #$06XX16A1 LDA #$2E      ;'.'       JSR XX1F42       DEX        BNE XX16A1       LDX #$03       JSR XX2039       LDA $0291       JSR XX196C       LDA $0290       JSR XX196C       LDX #$08       JSR XX2039       LDA #$03       STA $02AF       RTS ;********************************XX16C5 TAY        ADC $02AF       CMP #$3A      ;':'       BPL XX1676       STA $02AFXX16D0 JSR XX1F3B       DEY        BMI XX16D8       BNE XX16D0XX16D8 RTS ;********************************XX16D9 LDA #$02       CLC        JSR XX1647       LDX #$3A      ;':'       DEX        CPX $02AF       BCS XX16ED       LDA #$00       SEC        JSR XX1647XX16ED INC $02B2       LDX #$45      ;'E'       JSR XX2039       LDA $029C       JSR XX191D       DEC $02B2       JSR XX1F3B       INC $02AF       LDA #$40      ;'@'       AND $02B4       BEQ XX171E       LDA $02B3       BEQ XX171E       LDA $028E       ORA $028F       BEQ XX171E       JSR XX1534       JSR XX1F3BXX171E INC $02B2       LDX #$5C      ;'\'       JSR XX2039       DEC $02B2       JMP XX1F8D;********************************XX172C LDA $0346       STA $02B1       LDA #$04       AND $02B4       BNE XX1751       LDA $02B1       BNE XX173FXX173E RTS ;********************************XX173F LDA $02B4       AND #$10       BEQ XX173E       LDA #$00       STA $0358       STA $0359       STA $035AXX1751 LDA $0344       STA $46       LDA $0345       STA $47       LDA $0342XX175E PHA        LDA $0347       PHA        LDA #$00       STA $02B6       LDA $02AF       BEQ XX1771       CMP #$3A      ;':'       BCC XX1777XX1771 LDA #$00       SEC        JSR XX1647XX1777 LDA $02A7       BEQ XX17A2       TAX        LDA #$00       STA $02BDXX1782 DEX        BMI XX179B       SED        CLC        ADC #$56      ;'V'       STA $02BE       LDA $02BD       ADC #$02       STA $02BD       CLD        LDA $02BE       JMP XX1782;********************************XX179B PLA        JSR XX1925       JMP XX17A6;********************************XX17A2 PLA        JSR XX191DXX17A6 INC $02B6       INC $02B6       JSR XX18A5       LDY #$00       PLA        TAX        LDA $47       JSR XX1899       LDA $46       JSR XX1899       JSR XX18A5       TXA ;********************************;.FIL ASS4.DSM3;********************************;.END;*=$17C1;********************************       BMI XX17CD       CMP #$04       BMI XX17CD       LDX #$02       SEC        SBC #$02;********************************       .BYTE $2C ;BIT ZP SKIP;********************************XX17CD LDA #$00       PHA XX17D0 DEX        BMI XX17E6       LDA $0358,Y       JSR XX1899       JSR XX18A8       INY        INC $46       BNE XX17E3       INC $47XX17E3 JMP XX17D0;********************************XX17E6 LDA $02A2       BEQ XX17EE       JMP XX1878;********************************XX17EE LDY $02B6XX17F1 JSR XX18AB       INY        CPY #$16       BMI XX17F1       INC $02B7       LDX #$00       LDA $02B1       BNE XX184F       LDA $02C0       CMP #$3B      ;';'       BEQ XX184F       LDY #$00       LDA $02A3       BEQ XX1835XX1811 LDA $02C0,X       INX        CMP #$20      ;' '       BNE XX1820       CPX $02B7       BEQ XX1875       BNE XX1811XX1820 JSR XX1F42       INY        CPX $02B7       BEQ XX1875       LDA $02C0,X       INX        CMP #$20      ;' '       BNE XX1820       JSR XX1F42       INY XX1835 CPY #$07       BCS XX183F       JSR XX18AB       INY        BNE XX1835XX183F LDA $02C0,X       CMP #$20      ;' '       BNE XX184F       INY        INX        CPX $02B7       BEQ XX1875       BNE XX183FXX184F CPX $02B7       BEQ XX1875       LDA $02C0,X       CMP #$3B      ;';'       BNE XX186E       PHA        LDA $02BF,X       CMP #$20      ;' '       BNE XX186DXX1863 CPY #$17       BCS XX186D       JSR XX18AB       INY        BNE XX1863XX186D PLA XX186E INX        JSR XX1F42       INY        BNE XX184FXX1875 DEC $02B7XX1878 JSR XX1F3B       INC $02AF       INC $02A2       PLA        BEQ XX1898       TAX        LDA $02B4       BMI XX188E       TXA        JMP XX175E;********************************XX188E TXA        CLC        ADC $46       STA $46       BCC XX1898       INC $47XX1898 RTS ;********************************XX1899 INC $02B6       INC $02B6       JMP XX196C;********************************XX18A2 JSR XX18A8XX18A5 JSR XX18A8XX18A8 INC $02B6XX18AB LDA #$20      ;' '       JMP XX1F42;********************************XX18B0 INC $02B2       LDA $02B4       AND #$10       BEQ XX1916       LDA $02AF       CMP #$3A      ;':'       BMI XX18C7       LDA #$00       SEC        JSR XX1647XX18C7 JSR XX172C       LDX #$00       JSR XX2039       LDX $029F       TXA        AND #$0F       CPX #$20      ;' '       BCC XX18DB       ADC #$09XX18DB CPX #$10       BCC XX18E1       ADC #$09XX18E1 TAX        DEX        TXA        ASL A       TAX        LDA XX1EC9,X       STA $DA       LDA XX1ECA,X       STA $DB       LDY #$00XX18F2 LDA ($DA),Y       JSR XX1F42       INY        CPY #$15       BNE XX18F2XX18FC DEC $0343       BMI XX190B       BEQ XX190B       LDA #$2A      ;'*'       JSR XX1F42       JMP XX18FC;********************************XX190B LDA #$5E      ;'^'       JSR XX1F42       JSR XX1F3B       INC $02AFXX1916 INC $029C       DEC $02B2       RTS ;********************************XX191D LDX #$00       STX $02BD       STX $02BEXX1925 PHA        CLC        LSR A       LSR A       LSR A       LSR A       TAX XX192C LDA $02BE       DEX        BMI XX1949       SED        CLC        ADC #$16       STA $02BE       CLD        BCC XX192C       SED        LDA $02BD       ADC #$00       STA $02BD       CLD        JMP XX192C;********************************XX1949 PLA        AND #$0F       CLC        SED        ADC #$00       ADC $02BE       STA $02BE       CLD        BCC XX1963       LDA $02BD       SED        ADC #$00       CLD        STA $02BDXX1963 LDA $02BD       JSR XX196C       LDA $02BEXX196C PHA        LSR A       LSR A       LSR A       LSR A       JSR XX1977       PLA        AND #$0FXX1977 CLC        ADC #$30      ;'0'       CMP #$3A      ;':'       BMI XX1981       CLC        ADC #$07XX1981 JMP XX1F42;********************************; FUNCTION VECTOR TABLE;********************************XX1984 .BYTE <AA0ABF ;$BFXX1985 .BYTE >AA0ABF ;$0A;       .BYTE <AA0ABC ;$BC       .BYTE >AA0ABC ;$0A;       .BYTE <AA0AB9 ;$B9       .BYTE >AA0AB9 ;$0A;       .BYTE <AA0AB6 ;$B6       .BYTE >AA0AB6 ;$0A;       .BYTE <AA0AB3 ;$B3       .BYTE >AA0AB3 ;$0A;       .BYTE <AA0AB0 ;$B0       .BYTE >AA0AB0 ;$0A;       .BYTE <AA0AAD ;$AD       .BYTE >AA0AAD ;$0A;       .BYTE <AA0AAD ;$AD       .BYTE >AA0AAD ;$0A;       .BYTE <AA0AAA ;$AA       .BYTE >AA0AAA ;$0A;       .BYTE <AA0AA7 ;$A7       .BYTE >AA0AA7 ;$0A;       .BYTE <AA0AA4 ;$A4       .BYTE >AA0AA4 ;$0A;       .BYTE <AA0AA1 ;$A1       .BYTE >AA0AA1 ;$0A;       .BYTE <AA0A9E ;$9E       .BYTE >AA0A9E ;$0A;       .BYTE <AA0BF2 ;$F2       .BYTE >AA0BF2 ;$0B;       .BYTE <AA0BEF ;$EF       .BYTE >AA0BEF ;$0B;       .BYTE <AA0BC2 ;$C2       .BYTE >AA0BC2 ;$0B;       .BYTE <AA0B4F ;$4F       .BYTE >AA0B4F ;$0B;       .BYTE <XX0A79 ;$79       .BYTE >XX0A79 ;$0A;       .BYTE <XX0B01 ;$01       .BYTE >XX0B01 ;$0B;       .BYTE <AA0AEC ;$EC       .BYTE >AA0AEC ;$0A;       .BYTE <AA0ADD ;$DD       .BYTE >AA0ADD ;$0A;       .BYTE <AA0916 ;$16       .BYTE >AA0916 ;$09;       .BYTE <AA0919 ;$19       .BYTE >AA0919 ;$09;       .BYTE <AA0913 ;$13       .BYTE >AA0913 ;$09;********************************; ASSEMBER DIRECTIVES;********************************AA19B4 .TEXT 'BYT' ;.BYTE       .TEXT 'WOR' ;.WORD       .TEXT 'DBY' ;.DBYTE       .TEXT 'SKI' ;.SKIP       .TEXT 'PAG' ;.PAGE       .TEXT 'END' ;.END       .TEXT 'OPT' ;.OPT       .TEXT 'FIL' ;.FIL       .TEXT 'LIB' ;.LIB       .TEXT 'IFN' ;.IFN       .TEXT 'IFE' ;.IFEZZ19D5 .TEXT 'GEN' ;.GENERATE       .TEXT 'NOG' ;.NOGENERATE       .TEXT 'SYM' ;.SYMBOL       .TEXT 'NOS' ;.NOSYMBOL       .TEXT 'NOC'       .TEXT 'CNT'       .TEXT 'COU'       .TEXT 'ERR' ;.ERRORD       .TEXT 'NOE' ;.NOERRORS       .TEXT 'MEM'       .TEXT 'NOM'       .TEXT 'LIS' ;.LIST       .TEXT 'NOL' ;NOLIST;********************************; ASSEBMLER OPCODES;********************************ZZ19FC .TEXT 'ADC'       .TEXT 'AND'       .TEXT 'ASL'       .TEXT 'BCC'       .TEXT 'BCS'       .TEXT 'BEQ'       .TEXT 'BIT'       .TEXT 'BMI'       .TEXT 'BNE'       .TEXT 'BPL'       .TEXT 'BRK'       .TEXT 'BVC'       .TEXT 'BVS'       .TEXT 'CLC'       .TEXT 'CLD'       .TEXT 'CLI'       .TEXT 'CLV'       .TEXT 'CMP'       .TEXT 'CPX'       .TEXT 'CPY'       .TEXT 'DEC'       .TEXT 'DEX'       .TEXT 'DEY'       .TEXT 'EOR'       .TEXT 'INC'       .TEXT 'INX'       .TEXT 'INY'       .TEXT 'JMP'       .TEXT 'JSR'       .TEXT 'LDA'       .TEXT 'LDX'       .TEXT 'LDY'       .TEXT 'LSR'       .TEXT 'NOP'       .TEXT 'ORA'       .TEXT 'PHA'       .TEXT 'PHP'       .TEXT 'PLA'       .TEXT 'PLP'       .TEXT 'ROL'       .TEXT 'ROR'       .TEXT 'RTI'       .TEXT 'RTS'       .TEXT 'SBC'       .TEXT 'SEC'       .TEXT 'SED'       .TEXT 'SEI'       .TEXT 'STA'       .TEXT 'STX'       .TEXT 'STY'       .TEXT 'TAX'       .TEXT 'TAY'       .TEXT 'TSX'       .TEXT 'TXA'       .TEXT 'TXS'       .TEXT 'TYA';********************************;;********************************XX1AA4 .BYTE $FF       .BYTE $0D       .BYTE $1B       .BYTE $29       .BYTE $37       .BYTE $45       .BYTE $53       .BYTE $61       .BYTE $6F       .BYTE $7D       .BYTE $8B       .BYTE $99       .BYTE $A7       .BYTE $B5;********************************;;********************************XX1AB2 .BYTE $C3XX1AB3 .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $04       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $04       .BYTE $04       .BYTE $FF       .BYTE $FF       .BYTE $00       .BYTE $04       .BYTE $00       .BYTE $04       .BYTE $00       .BYTE $00       .BYTE $04       .BYTE $00       .BYTE $FF       .BYTE $00       .BYTE $14       .BYTE $14       .BYTE $FF       .BYTE $FF       .BYTE $10       .BYTE $FF       .BYTE $FF       .BYTE $14       .BYTE $FF       .BYTE $10       .BYTE $FF       .BYTE $10       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $10       .BYTE $FF       .BYTE $14       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $00       .BYTE $00;********************************;;********************************       .BYTE $20       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $10       .BYTE $10       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $08       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $00       .BYTE $FF       .BYTE $00       .BYTE $FF       .BYTE $FF       .BYTE $00       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $0C       .BYTE $0C       .BYTE $00       .BYTE $00       .BYTE $08       .BYTE $0C       .BYTE $08       .BYTE $0C       .BYTE $08       .BYTE $08       .BYTE $0C       .BYTE $08       .BYTE $FF       .BYTE $FF       .BYTE $1C       .BYTE $1C       .BYTE $FF       .BYTE $FF       .BYTE $18       .BYTE $FF       .BYTE $FF       .BYTE $1C       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $18       .BYTE $FF       .BYTE $FF       .BYTE $18       .BYTE $18       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $FF       .BYTE $1C       .BYTE $FF       .BYTE $FF       .BYTE $FF;********************************;;********************************XX1B85 .BYTE $01       .BYTE $01       .BYTE $05       .BYTE $15       .BYTE $15       .BYTE $15       .BYTE $07       .BYTE $15       .BYTE $15       .BYTE $15       .BYTE $14       .BYTE $15       .BYTE $15       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $01       .BYTE $06       .BYTE $06       .BYTE $0C       .BYTE $14       .BYTE $14       .BYTE $01       .BYTE $0C       .BYTE $14       .BYTE $14       .BYTE $03       .BYTE $04       .BYTE $01       .BYTE $0B       .BYTE $08       .BYTE $05       .BYTE $14       .BYTE $01       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $05       .BYTE $05       .BYTE $14       .BYTE $14       .BYTE $01       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $02       .BYTE $09       .BYTE $0A       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $14       .BYTE $14;********************************;;********************************XX1BBD .BYTE $61       .BYTE $21       .BYTE $06       .BYTE $90       .BYTE $B0       .BYTE $F0       .BYTE $24       .BYTE $30       .BYTE $D0       .BYTE $10       .BYTE $00;********************************;;********************************       .BYTE $50       .BYTE $70       .BYTE $18       .BYTE $D8       .BYTE $58       .BYTE $B8       .BYTE $C1       .BYTE $E0       .BYTE $C0       .BYTE $C6       .BYTE $CA       .BYTE $88       .BYTE $41       .BYTE $E6       .BYTE $E8       .BYTE $C8       .BYTE $4C       .BYTE $20       .BYTE $A1       .BYTE $A2       .BYTE $A0       .BYTE $46       .BYTE $EA       .BYTE $01       .BYTE $48       .BYTE $08       .BYTE $68       .BYTE $28       .BYTE $26       .BYTE $66       .BYTE $40       .BYTE $60       .BYTE $E1       .BYTE $38       .BYTE $F8       .BYTE $78       .BYTE $81       .BYTE $86       .BYTE $84       .BYTE $AA       .BYTE $A8       .BYTE $BA       .BYTE $8A       .BYTE $9A       .BYTE $98;********************************;;********************************XX1BF5 .TEXT '**'       .BYTE $AA;********************************; ASSEMBLER OUTPUT MESSAGES; ; MESSGAES TERMINATE WITH ; LAST CHAR HIGH BIT SET;********************************       .TEXT 'PAGE'       .BYTE $A0AA1BFD .BYTE $0D       .BYTE $0A       .BYTE $0D       .BYTE $0A       .TEXT 'LINE# LOC   CODE        LINE'       .BYTE $0D       .BYTE $0A       .BYTE $0D       .BYTE $0A       .BYTE $0D       .BYTE $8AAA1C23 .TEXT 'SYMBOL TABLE OVERFLOW'       .BYTE $0D       .BYTE $8AXX1C3A .TEXT 'ERRORS ='       .BYTE $A0AA1C43 .BYTE $0D       .TEXT 'PASS1'AA1C49 .BYTE $8DAA1C4A .BYTE $0D       .TEXT 'PASS2'       .BYTE $8DAA1C51 .BYTE $0D       .TEXT 'END OF ASSEMBLY'       .BYTE $0D       .BYTE $8AAA1C63 .BYTE $0D       .BYTE $0A       .BYTE $0D       .BYTE $0A       .TEXT 'SYMBOL TABLE'       .BYTE $0D       .BYTE $0A       .BYTE $0D       .BYTE $0A       .TEXT 'SYMBOL VALUE'       .BYTE $0D       .BYTE $8AAA1C85 .BYTE $0D       .TEXT 'SOURCE FILE NAME?'       .BYTE $A0AA1C98 .BYTE $0D       .TEXT 'FILE NAME ERROR'       .BYTE $8DAA1CA9 .BYTE $0D       .TEXT '.LIB ERROR'       .BYTE $8DAA1CB5 .BYTE $0D       .BYTE $0D       .BYTE $0D       .TEXT 'PET RESIDENT ASSEMBLER V121579'       .BYTE $0D       .TEXT '(C) 1979 BY COMMODORE BUSINESS MACHINES'       .BYTE $0D       .BYTE $0D       .TEXT 'OBJECT FILE (CR OR D:NAME):'       .BYTE $A0AA1D1C .BYTE $0D       .TEXT 'HARD COPY (CR/Y OR N)?'       .BYTE $A0AA1D34 .BYTE $0D       .TEXT 'IEEE PRINTER (CR/Y OR N)?'       .BYTE $A0;********************************;;********************************AA1D4F .TEXT 'UNDEFINED SYMBOL*****'AA1D64 .TEXT 'DUPLICATE SYMBOL*****'AA1D79 .TEXT 'IMPROPER OPCODE******'AA1D8E .TEXT 'INVALID ADDRESS******'AA1DA3 .TEXT '.A MODE NOT ALLOWED**'AA1DB8 .TEXT 'RAN OFF END OF CARD**'AA1DCD .TEXT 'LABEL START NEEDS A-Z'AA1DE2 .TEXT 'LABEL TOO LONG*******'AA1DF7 .TEXT 'NON-ALPHANUMERIC*****'AA1E0C .TEXT 'FORWARD REFERENCE****'AA1E21 .TEXT 'INDEX MUST BE X OR Y*';AA1E36 .BYTE 'CAN''T EVAL EXPRESSION'AA1E36 .TEXT "CAN'T EVAL EXPRESSION"AA1E4B .TEXT 'UNDEFINED DIRECTIVE**'AA1E60 .TEXT 'BRANCH OUT OF RANGE**'XX1E75 .TEXT 'ILLEGAL OPERAND TYPE*'AA1E8A .TEXT 'INDIRECT OUT OF BOUND'XX1E9F .TEXT 'A,X,Y,S,P RESERVED***'AA1EB4 .TEXT 'PC NEGATIVE--RESET 0*';********************************;********************************; UNDEFINED SYMBOL XX1EC9 .BYTE <AA1D4F ;$4FXX1ECA .BYTE >AA1D4F ;$1D; DUPLICATE SYMBOL       .BYTE <AA1D64 ;$64       .BYTE >AA1D64 ;$1D; IMPROPER OPCODE       .BYTE <AA1D79 ;$79       .BYTE >AA1D79 ;$1D; INVALID ADDRESS       .BYTE <AA1D8E ;$8E       .BYTE >AA1D8E ;$1D; .A MODE NOT ALLOWED       .BYTE <AA1DA3 ;$A3       .BYTE >AA1DA3 ;$1D; *EMPTY*       .BYTE $00       .BYTE $00; RAN OFF END OF CARD       .BYTE <AA1DB8 ;$B8       .BYTE >AA1DB8 ;$1D; LABEL START NEEDS A-Z       .BYTE <AA1DCD ;$CD       .BYTE >AA1DCD ;$1D; LABEL TOO LONG       .BYTE <AA1DE2 ;$E2       .BYTE >AA1DE2 ;$1D; NON-ALPHANUMERIC       .BYTE <AA1DF7 ;$F7       .BYTE >AA1DF7 ;$1D; FORWARD REFERENCE       .BYTE <AA1E0C ;$0C       .BYTE >AA1E0C ;$1E; INDEX MUST BE X OR Y       .BYTE <AA1E21 ;$21       .BYTE >AA1E21 ;$1E; CAN''T EVAL EXPRESSION       .BYTE <AA1E36 ;$36       .BYTE >AA1E36 ;$1E; UNDEFINED DIRECTIVE       .BYTE <AA1E4B ;$4B       .BYTE >AA1E4B ;$1E; *EMPTY*       .BYTE $00       .BYTE $00; *EMPTY*       .BYTE $00       .BYTE $00;********************************ZZ1EE9 RTS ;********************************ZZ1EEA ASL XX1E75,X       TXA        ASL XX1E9F,X       LDY $1E,XXX1EF3 STY $B8       STX $B3       BIT $02BF       BVS XX1F2C       LDX #$02       CPX $027A       BEQ XX1F0E       JSR CLRCHN       LDX #$02XX1F08 STX $027A       JSR CHKIN ;$F7AFXX1F0E JSR CHRIN       LDX $96       BEQ XX1F27       TAY        TXA        AND #$40      ;'@'       BNE XX1F21       JSR XX1FE6       JMP XX1F8D;********************************XX1F21 LDA #$00       STA $028C       TYA XX1F27 LDY $B8       LDX $B3       RTS ;********************************XX1F2C LDX #$03       CPX $027A       BEQ XX1F0E       JSR CLRCHN;********************************;.FIL ASS4.DSM5;********************************;.END;*=$1F36;********************************       LDX #$03       JMP XX1F08;********************************XX1F3B LDA #$0D       JSR XX1F42       LDA #$0AXX1F42 STX $B3       STY $B8       PHA        BIT $02B3       BPL XX1F86       BVS XX1F68       LDA $027A       CMP #$04       BEQ XX1F60       JSR CLRCHN       LDX #$04       STX $027A       JSR CHKOUT ;$F7FEXX1F60 PLA        PHA        JSR CHROUT       JMP XX1F81;********************************XX1F68 STA VIA+$01 ;$E841       LDA #$CC       STA VIA+$0C ;$E84CXX1F70 LDA VIA+$0D ;$E84D       AND #$02       BEQ XX1F70       LDA #$EC       STA VIA+$0C ;$E84C       BIT VIA+$01 ;$E841       PLA        PHA XX1F81 LDX $02B2       BEQ XX1F89XX1F86 JSR CHEOUT ;$E202XX1F89 PLA        JMP XX1F27;********************************XX1F8D LDA #$01       JSR CLOSE2 ;$F2E2       LDA #$04       JSR CLOSE2 ;$F2E2       LDA #$05       JSR CLOSE2 ;$F2E2       LDA $03B4       BNE XX1FA9       JSR XX214D       LDA #$06       JSR CLOSE2 ;$F2E2XX1FA9 LDA #$07       JSR CLOSE2 ;$F2E2       JSR CLRCHN       JMP BASICR ;$B3FF RESTART BASIC;********************************XX1FB4 LDA $9B       CMP #$EF       BEQ XX1FBB       RTS ;********************************XX1FBB LDA $9B       CMP #$EF       BEQ XX1FBB       SEI        JSR CLRCHN       LDA #$00       STA $027A       STA $9E       CLI XX1FCD JSR INPUT ;$F205       ORA #$00       BEQ XX1FCD       CMP #$42      ;'B'       BEQ XX1FDD       CMP #$54      ;'T'       BEQ XX1FE0       RTS ;********************************XX1FDD JMP XX1F8D;********************************XX1FE0 JSR CLRCHN       JMP BASICW ;$D7A4;********************************XX1FE6 JSR CLRCHN       LDX #$07       STX $027A       JSR CHKIN ;$F7AF       JSR CHRIN       STA $01       JSR CHRIN       STA $02       CMP #$30      ;'0'       BNE XX200D       LDA $01       CMP #$30      ;'0'       BNE XX200DXX2005 JSR CHRIN       CMP #$0D       BNE XX2005       RTS ;********************************XX200D LDX #$01XX200F LDA $01,X       STA BB0310,X       DEX        BPL XX200F       LDY #$02XX2019 STY $B8       JSR CHRIN       CMP #$0D       BEQ XX202A       LDY $B8       STA BB0310,Y       INY        BNE XX2019XX202A LDA #$8D       STA BB0310,Y;********************************; PRINT BUFFER;********************************       LDA #>BB0310 ;#$03       LDY #<BB0310 ;#$10       JSR XX063A       JMP BASICR ;$B3FF;********************************XX2039 STX $B3XX203B LDX $B3       LDA XX1BF5,X       PHP        AND #$7F       JSR XX1F42       INC $B3       PLP        BPL XX203B       RTS ;********************************XX204C STX $B3       JSR XX2054       LDX $B3       RTS ;********************************XX2054 PHA        STA $0358,Y       LDA $03B4       BNE XX2062       LDA $02A6       BNE XX2064XX2062 PLA XX2063 RTS ;********************************XX2064 LDA $02B4       AND #$08       BEQ XX2062       TYA        CLC        ADC $46       EOR $0382       BNE XX207B       ADC $47       CMP $0383       BEQ XX2086XX207B LDA $0386       BEQ XX2083       JSR XX20E4XX2083 JSR XX20B6XX2086 LDX $0386       PLA        STA $0389,X       INC $0386       CLC        ADC $0380       STA $0380       BCC XX209C       INC $0381XX209C INC $0382       BNE XX20A4       INC $0383XX20A4 CPX #$17       BCC XX2063       JSR XX20E4       JMP XX20C0;********************************XX20AE LDA #$00       STA $0384       STA $0385XX20B6 LDA $46       STA $0382       LDA $47       STA $0383XX20C0 LDA #$00       STA $0386       STA $0381       LDA $0382       STA $0388       STA $0380       LDA $0383       STA $0387       CLC        ADC $0380       STA $0380       BCC XX20E3       INC $0381XX20E3 RTS ;********************************XX20E4 INC $0384       BNE XX20EC       INC $0385XX20EC LDX #$00       STX $B3       LDA $0386       CLC        ADC #$03       STA $B8       LDA #$3B      ;';'       JSR XX2136XX20FD LDX $B3       LDA $0386,X       JSR XX2125       INC $B3       LDY $B8       CPY $B3       BNE XX20FD       LDA $0386       CLC        ADC $0380       PHA        LDA #$00       ADC $0381       JSR XX2125       PLA        JSR XX2125       LDA #$0D       BNE XX2136XX2125 PHA        LSR A       LSR A       LSR A       LSR A       JSR XX2167       JSR XX2136       PLA        AND #$0F       JSR XX2167XX2136 PHA        LDA $027A       CMP #$06       BEQ XX2149       JSR CLRCHN       LDX #$06       STX $027A       JSR CHKOUT ;$F7FEXX2149 PLA        JMP CHROUT;********************************XX214D LDA $0386       BEQ XX2155       JSR XX20E4XX2155 LDA $0384       STA $0382       LDA $0385       STA $0383       JSR XX20C0       JMP XX20E4;********************************XX2167 CLC        ADC #$F6       BCC XX216E       ADC #$06XX216E ADC #$3A      ;':'       RTS ;********************************ZZ2177 TAX        TAX        TAX        TAX        TAX        TAX        TAX ;********************************;;********************************.END